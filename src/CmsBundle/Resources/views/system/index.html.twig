{% extends '@Cms/base.html.twig' %}
{% trans_default_domain 'cms' %}
{% block body %}
	{# <form method="post"> #}
		<!-- <div class="card">
			<nav class="tabbar">
				<ul class="tabs tabs-transparent">
					<li class="tab">
						<a class="active" href="#backup">{{'Backup'|trans}}</a>
					</li>
					<li class="tab">
						<a href="#create">{{'Nieuwe backup'|trans}}</a>
					</li>
				</ul>
			</nav>
		</div> -->

		<ul class="nav nav-tabs" role="tablist">
		  <li class="nav-item" role="presentation">
		    <button class="nav-link active" id="tab1" data-bs-toggle="tab" data-bs-target="#tab-content1" type="button" role="tab" aria-controls="tab-content1" aria-selected="true">
		      {{'Backup'|trans}}
		    </button>
		  </li>
		  <li class="nav-item" role="presentation">
		    <button class="nav-link" id="tab2" data-bs-toggle="tab" data-bs-target="#tab-content2" type="button" role="tab" aria-controls="tab-content2" aria-selected="false">
		      {{'Nieuwe backup'|trans}}
		    </button>
		  </li>
		</ul>

		<div class="tab-content">
			<div class="tab-pane fade show active" aria-labelledby="tab-content1" id="tab-content1" role="tabpanel">
				<div id="backup" class="t-content">
					<div class="card">
						<div class="card-content">
							<div class="card-title">
								<div class="card-titles">
									<h6>{{'Database backups'|trans}}</h6>
								</div>
							</div>

							<div class="table-responsive">
							<table class="table table-hover">
								<thead>
									<tr>
										<th>{{ 'Datum' | trans }}</th>
										<th>{{ 'Soort' | trans }}</th>
										<th>{{ 'Backup' | trans }}</th>
										<th></th>
									</tr>
								</thead>
								<tbody>
									{% for timestamp,file in dumps %}
									<tr>
										<td>{{timestamp|date('d-m-Y H:i:s')}}</td>
										<td>
											{% if file matches '{^dump_tables.*?$}' %}
											{{ 'Alleen structuur' | trans }}
											{% elseif file matches '{^dump_data.*?$}' %}
											{{ 'Alleen data' | trans }}
											{% else %}
											{{ 'Structuur + data' | trans }}
											{% endif %}
										</td>
										<td>{{file}}</td>
										<td class="text-end">
											<a href="{{path('admin_system_download', {file: file})}}" class="btn btn-gray">{{ 'Download' | trans }}</a>
											{% if file matches '{^dump_data.*?$}' %}
											<a href="{{path('admin_system_restore', {file: file})}}" class="confirm btn-green" data-msg="{{ 'Weet u zeker dat u dit bestand wilt herstellen?' | trans }}">{{ 'Herstellen' | trans }}</a>
											{% endif %}
										</td>
									</tr>
									{% endfor %}
								</tbody>
							</table>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="tab-pane fade" aria-labelledby="tab-content2" id="tab-content2" role="tabpanel">
				<div id="create" class="t-content">
					<div class="card">
						<div class="card-content">
							<div class="card-title">
								<div class="card-titles">
									<h6>{{'Backup maken'|trans}}</h6>
								</div>
							</div>

							<form method="post">
								<div class="input-field ">
									<label for="export_data" class="required">{{ 'Backup inhoud' | trans }}</label>
									<select id="export_data" class="form-control form-select" name="export[data]">
										<option value="data"  selected="selected">{{ 'Alleen data' | trans }}</option>
										<option value="structure" >{{ 'Alleen structuur' | trans }}</option>
										<option value="full" >{{ 'Data en structuur' | trans }}</option>
									</select>
								</div>
								<div class="center-align">
									<button name="export[type]" value="create" class="btn btn-gray" type="submit"><i class="fa fa-save"></i> {{ 'Backup maken' | trans }}</button>
									<button name="export[type]" value="download" class="btn btn-gray" type="submit"><i class="fa fa-download"></i> {{ 'Backup maken + downloaden' | trans }}</button>
								</div>
							</form>
						</div>
					</div>
				</div>
			</div>
		</div>
	{# </form> #}
{% endblock %}
