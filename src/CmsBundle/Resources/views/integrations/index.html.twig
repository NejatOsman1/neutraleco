{% extends '@Cms/base.html.twig' %}
{% trans_default_domain 'cms' %}

{% block pagetitle %}{{'Settings'|trans}}{% endblock %}

{% block body %}
	{{ form_start(form) }}
	{{ form_errors(form) }}

	{% set active = 'telegram' %}
	{% if app.request.get('active') %}
		{% set active = app.request.get('active') %}
	{% endif %}

		<ul class="nav nav-tabs" role="tablist">
			<li class="nav-item" role="presentation">
				<button class="nav-link {{active == 'telegram' ? 'active' : ''}}" id="tab1" data-bs-toggle="tab" data-bs-target="#tab-content1" type="button" role="tab" aria-controls="tab-content1" aria-selected="true">
					<i class="fab fa-telegram-plane fa-fw"></i> {{'Telegram'|trans}}
				</button>
			</li>
			{#
			<li class="nav-item" role="presentation">
				<button class="nav-link" id="tab2" data-bs-toggle="tab" data-bs-target="#tab-content2" type="button" role="tab" aria-controls="tab-content2" aria-selected="false">
					{{'tab'|trans}}
				</button>
			</li>
			#}
		</ul>

		<div class="tab-content">
			<div class="tab-pane fade show active" aria-labelledby="tab-content1" id="tab-content1" role="tabpanel">
				<div id="telegram" class="t-content">
					<div class="card">
						<div class="card-content">
							<div class="card-title">
								<div class="card-titles">
									<h6>{{'Telegram instellingen'|trans}}</h6>
								</div>
								<div class="card-actions">
									<a class="btn" onclick="testMessage('telegram');"><i class="fa fa-cog"></i> TESTEN</a>
								</div>
							</div>
						    <div class="row">
						    	<div class="col s12">
									{{form_row(form.telegram)}}
								</div>
						    	<div class="col s12">
									{{form_row(form.telegram_chat_id)}}
								</div>
						    	<div class="col s12">
									{{form_row(form.telegram_token)}}
								</div>
						    </div>
						</div>
					</div>
				</div>
			</div>
			{#
			<div class="tab-pane fade" aria-labelledby="tab-content2" id="tab-content2" role="tabpanel">
			</div>
			#}
		</div>



		<div class="btn-bar">
			<div class="right">
				<button type="submit" class="btn right waves-effect waves-light"><i class="material-icons left">save</i>{{'Opslaan'|trans}}</button>
			</div>
		</div>
	{{ form_end(form) }}

	<script>
	function testMessage(provider){
		$.ajax('{{path('admin_integrations_test')}}/' + provider).done(function(r){
			Toastify({
				text: r,
				duration: 2000,
				escapeMarkup: false,
				close: false,
				gravity: "bottom",
				position: "right",
				stopOnFocus: true,
				onClick: function(){}
			}).showToast();
		});
	}
	</script>

{% endblock %}
