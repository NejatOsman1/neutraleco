{% extends '@Cms/base.html.twig' %}
{% trans_default_domain 'cms' %}

{% block pagetitle %}{{'Slider'|trans}}{% endblock %}

{% block body %}
	{{ form_start(form, {'multipart': true}) }}
	<div class="card">
		<div class="card-content">
			<span class="card-title">{{ 'Slide wijzigen' | trans }}</span>
	    	{{ form_errors(form) }}
			{{ form_widget(form) }}
			<div class="file-field input-field">
				<div class="btn">
					<span>{{ 'Afbeelding' | trans }}</span>
					<input type="file" name="media">
				</div>
				<div class="file-path-wrapper">
					<input class="file-path validate" type="text">
				</div>
			</div>

			{% if Entry.media %}
				<p><a href="{{path('admin_mod_slider_entry_edit_delimage', {'id': Entry.id})}}" data-msg="{{ 'Weet u zeker dat u de afbeelding wilt verwijderen?' | trans }}" class="confirm btn red darken-1">{{ 'Afbeelding verwijderen' | trans }}</a></p>
				<img src="/{{Entry.media.getWebPath}}" style="max-width:80%;margin-top:20px;" alt="preview" />
			{% endif %}
		</div>
	</div>

	<div class="card">
		<div class="card-content center">
			<button type="submit" class="btn-large green darken-1"><i class="material-icons left">save</i>{{ 'Opslaan' | trans }}</button>
			{# <a href="{{path('admin_metadata')}}" class="btn-large red darken-1"><i class="material-icons left">clear</i>{{ 'Annuleren' | trans }}</a> #}
		</div>
    </div>
	{{ form_end(form) }}

	<script>
		function pageSelect(id, slugkey, label){
			jQuery('#form_buttonUrl').val("page:" + id + ":" + label + "");
			cpop.close();
		}

		var selectPageEl = jQuery('<button type="button">{{ 'Page' | trans }}</button>');
		selectPageEl.on('click', function(e){
			e.preventDefault();
			cpop.reset().loadAjax('{{path('admin_page_list')}}');
		});
		jQuery('#form_buttonUrl').parent().append(selectPageEl);
	</script>

	{% if app.request.query.get("CKEditor") is null %}
		{# CKEDITOR #}
		<script src="{{asset('bundles/cms/ckeditor/ckeditor.js')}}"></script>
	{% endif %}
{% endblock %}
